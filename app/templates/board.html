
<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
  <title>chessboardjs Example #1001 - Start Position</title>
  <base href="../" />
  <link rel="stylesheet" href="css/chessboard-1.0.0.css">
</head>
<body>

<!--- Begin Example HTML ------------------------------------------------------>
<div id="myBoard" style="width: 400px"></div>
<!--- End Example HTML -------------------------------------------------------->

<script src="js/jquery-3.4.1.min.js"></script>
<script src="js/chessboard-1.0.0.js" ></script>
<script>
// --- Begin Example JS --------------------------------------------------------

let idx = 0
let playerTurn = true;
let example = {
    "startingPostion": "r1bq1rk1/pppp1pp1/2n4p/2b1p3/2B1P1n1/2NP1N2/PPPB1PPP/R2Q1RK1 b - - 3 8",
    "moves": [
        {"start": "f3", "end": "e5"},
        {"start": "f7", "end": "f6"},
    ]
}

function computesMove () {
  if (playerTurn === false || idx < example.moves.length) {
    let computersMove = example.moves[idx];
    board.move(computersMove.start + "-" + computersMove.end);
    playerTurn = true;
    idx++;
  }
}

function onDrop (source, target, piece, newPos, oldPos, orientation) {
    if (!playerTurn){
        return 'snapback'
    }
    if (example.moves[idx].start === source && example.moves[idx].end === target) {
        board.move(example.moves[idx].start, example.moves[idx].end)
        idx++
        if (idx === example.moves.length) {
          console.log("Puzzle solved")
        }
        playerTurn = false;
        computesMove();
        return;
    } else {
        console.log("Wrong move!")
        return 'snapback'
    }
}

var board = Chessboard('myBoard', {
    position: example.startingPostion,
    moveSpeed: 'slow',
    showNotation: true,
    draggable: true,
    onDrop: onDrop,
})
// --- End Example JS ----------------------------------------------------------
</script>
</body>
</html>
